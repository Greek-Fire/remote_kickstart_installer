- name: "copy from iso mount to {{ foreman_server_url }}/pub/***"
  copy:
    remote_src: true
    src:  "{{ path['copy_path'] }}"
    dest: "{{ path['web_path'] }}"
    owner: apache
    group: apache
  when: path['web_path'] is defined

- name: "copy from iso mount to {{ foreman_server_url }}/pub/***"
  copy:
    remote_src: true
    src:  "{{ path['appstream_copy_path'] }}"
    dest: "{{ path['appstream_web_path'] }}"
    owner: apache
    group: apache
  when: path['appstream_web_path'] is defined

- name: "copy from iso mount to {{ foreman_server_url }}/pub/***"
  copy:
    remote_src: true
    src:  "{{ path['baseos_copy_path'] }}"
    dest: "{{ path['baseos_web_path'] }}"
    owner: apache
    group: apache
  when: path['basos_web_path'] is defined

- name: generate treeinfo
  template:
    src:  "{{ jinja_path }}"
    dest: "{{ path['appstream_web_path'] }}"
    owner: apache
    group: apache
 when: path['appstream_web_path'] is defined
  vars:
    jinja_path: AppStream.j2

- name: generate treeinfo
  template:
    src:  "{{ jinja_path }}"
    dest: "{{ path['baseos_web_path'] }}"
    owner: apache
    group: apache
  when: path['baseos_web_path'] is defined
  vars:
    jinja_path: BaseOS.j2